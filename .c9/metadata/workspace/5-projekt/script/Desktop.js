{"filter":false,"title":"Desktop.js","tooltip":"/5-projekt/script/Desktop.js","undoManager":{"mark":61,"position":61,"stack":[[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":218,"column":2},"action":"insert","lines":["\"use strict\";","","var Desktop = {","    ","    counter : 0,","    ","    loadIcon : null,","    ","    footer : null,","    ","    time : null,","    ","    //Variablerna för popup fönstret.","    popupWindow: function(galler) ","    { ","        Desktop.counter++;","        ","        ","        var popup = document.createElement(\"div\");","        ","\t\tpopup.setAttribute(\"id\", \"popup\");","\t\t\t\t","\t\t","\t\tvar top = document.createElement(\"div\");","\t\ttop.setAttribute(\"id\", \"top\");","\t\t\t\t","\t\tvar mid = document.createElement(\"div\");","\t\tmid.setAttribute(\"id\", \"mid\");","\t\t\t\t"," Desktop.footer = document.createElement(\"div\");"," ","\t Desktop.footer.setAttribute(\"id\", \"footer\");"," "," alert(\"I am an alert box!\");","\t\t\t\t","\t\tpopup.appendChild(top);","\t\t","\t\tpopup.appendChild(mid);","\t\t","\t\tpopup.appendChild(Desktop.footer);// skapar tre ramar inuti popupfönstret ","\t\t\t\t","        var topright = document.createElement(\"div\");","\t\ttopright.setAttribute(\"id\", \"topright\");","\t\t\t\t","\t\tvar topleft = document.createElement(\"div\");","\t\ttopleft.setAttribute(\"id\", \"topleft\");","\t\t\t\t","\t\ttop.appendChild(topleft);","\t\ttop.appendChild(topright);// dellar upp topramen i höger och vänster","\t\t","        var imageIcon = document.createElement(\"img\");","        ","        imageIcon.setAttribute(\"src\", \"images/tinyCamera.png\");","        ","        imageIcon.setAttribute(\"id\", \"image\");","        ","        topleft.appendChild(imageIcon);","        ","        var cancelButton = document.createElement(\"img\");","        ","         cancelButton.setAttribute(\"src\", \"images/delete.png\");","         ","         cancelButton.setAttribute(\"id\", \"cancelButton\")","         ","         topright.appendChild(cancelButton);","        ","        var ajaxImg = document.createElement(\"div\");","    ","        alert(\"I am an alert box2323!\");","        Desktop.time = setTimeout(function() ","        {","        Desktop.loadIcon = document.createElement(\"img\");","        ","         Desktop.loadIcon.setAttribute(\"src\", \"images/ajax.gif\");","         ","          Desktop.loadIcon.setAttribute(\"id\", \"load\")","        Desktop.footer.appendChild(Desktop.loadIcon);","        },300);  ","        ","   ","        ","        ","        //\"Knuffar\" in taggarna i popup rutan.","        //cancelButton.setAttribute(\"click\");","        ","        ajaxImg.appendChild(galler);","        ","        mid.appendChild(ajaxImg);","","alert(\"ok\");","        //body.insertBefore(body.firstChild);","        ","        document.getElementById(\"body\").appendChild(popup);","        ","        //Funktion som stänger ner popup fönstret.","        cancelButton.onclick = function() { ","            popup.parentNode.removeChild(popup);","            Desktop.counter = 0;","        };","        ","        alert(\"slut3!\");","    },","    ","    //Knapp funktionen som kallar på ajax anropet för bilderna. ","    galleryButton: function() ","    {","            var that = this;","            var galleryIcon = document.getElementById(\"Menyikon\");","            ","            galleryIcon.addEventListener(\"click\", function() ","            {","                    if (that.counter === 1) {","                        return;","                    }","                    else{","                    that.init();","                    }","            },false);","    },","    ","    //Ajax metoden som hämtar ut länken med bilderna och knuffar in de i popup fönstret. ","    init: function() ","    {","        var galler = document.createElement(\"div\");","        ","        this.popupWindow(galler);","        var xhr = new XMLHttpRequest(); ","        var count = 0;","        ","        ","        xhr.onreadystatechange = function() ","        {","            if(xhr.readyState === 4) ","            {","                if(xhr.status >= 200 && xhr.status < 300 || xhr.status === 304) ","                {","                    var jsonStr = JSON.parse(xhr.responseText);","                    ","                    alert(xhr.responseText);","                    ","                    var temp; // varibelm kommer höd och bred ","                    ","                    var height = 0;","                    ","                    var width = 0;","                  ","                    //Letar upp bilden med den bredaste och högsta tumlängd.","                    for (var n = 0; n < jsonStr.length; n++) ","                    {","                        temp = jsonStr[n];","                        if (temp.thumbHeight > height) ","                        {","                            height = temp.thumbHeight;","                        }","                        if (temp.thumbWidth > width) ","                        {","                            width = temp.thumbWidth;","                        }","                    }","                    ","                    //Hämtar ut varje photo individuellt.","                    for (var i = 0; i < jsonStr.length; i++) ","                    {","                        var bild = document.createElement(\"img\");","                        ","                        var temp2 = document.createElement(\"div\");","                        ","                        temp2.setAttribute(\"class\", \"boxes\");","                        ","                       bild.setAttribute(\"src\", jsonStr[i].thumbURL);","                        ","                        bild.setAttribute(\"id\", \"photo\" + count);","                        ","                        galler.appendChild(temp2);","                        ","                        temp2.appendChild(bild);","                        ","                        count++;","                        ","                        //Ändrar bakgrundsbilden.","                       bild.onclick = function(e) ","                        {","                            var image = e.target.id.replace(\"photo\", \"\"); ","                            ","                            var Bakgrundsbild  = jsonStr[image].URL;","                            ","                            var body = document.getElementById(\"body\");","                            ","                            body.style.backgroundImage = \"url(\" + Bakgrundsbild  + \")\";","                            ","                        };      ","                        ","                    temp2.style.width = width + \"px\";","                    ","                    temp2.style.height = height + \"px\";","                    ","                    }","                }","                else {","                    console.log(\"Läsfel, status\"+xhr.status);","                }","                ","                clearTimeout(Desktop.time); // rensar ladare ","                ","                Desktop.footer.removeChild(Desktop.loadIcon);","            }","        };","        ","        xhr.open(\"get\", \"http://homepage.lnu.se/staff/tstjo/labbyServer/imgviewer/\", true);    ","        ","        xhr.send(null);","    }","    ","};","","window.onload = function(){","    Desktop.galleryButton();","    ","};"]}]}],[{"group":"doc","deltas":[{"start":{"row":215,"column":0},"end":{"row":218,"column":2},"action":"remove","lines":["window.onload = function(){","    Desktop.galleryButton();","    ","};"]},{"start":{"row":215,"column":0},"end":{"row":433,"column":2},"action":"insert","lines":["\"use strict\";","","var Desktop = {","    ","    counter : 0,","    ","    loadIcon : null,","    ","    footer : null,","    ","    time : null,","    ","    //Variablerna för popup fönstret.","    popupWindow: function(galler) ","    { ","        Desktop.counter++;","        ","        ","        var popup = document.createElement(\"div\");","        ","\t\tpopup.setAttribute(\"id\", \"popup\");","\t\t\t\t","\t\t","\t\tvar top = document.createElement(\"div\");","\t\ttop.setAttribute(\"id\", \"top\");","\t\t\t\t","\t\tvar mid = document.createElement(\"div\");","\t\tmid.setAttribute(\"id\", \"mid\");","\t\t\t\t"," Desktop.footer = document.createElement(\"div\");"," ","\t Desktop.footer.setAttribute(\"id\", \"footer\");"," "," alert(\"I am an alert box!\");","\t\t\t\t","\t\tpopup.appendChild(top);","\t\t","\t\tpopup.appendChild(mid);","\t\t","\t\tpopup.appendChild(Desktop.footer);// skapar tre ramar inuti popupfönstret ","\t\t\t\t","        var topright = document.createElement(\"div\");","\t\ttopright.setAttribute(\"id\", \"topright\");","\t\t\t\t","\t\tvar topleft = document.createElement(\"div\");","\t\ttopleft.setAttribute(\"id\", \"topleft\");","\t\t\t\t","\t\ttop.appendChild(topleft);","\t\ttop.appendChild(topright);// dellar upp topramen i höger och vänster","\t\t","        var imageIcon = document.createElement(\"img\");","        ","        imageIcon.setAttribute(\"src\", \"images/tinyCamera.png\");","        ","        imageIcon.setAttribute(\"id\", \"image\");","        ","        topleft.appendChild(imageIcon);","        ","        var cancelButton = document.createElement(\"img\");","        ","         cancelButton.setAttribute(\"src\", \"images/delete.png\");","         ","         cancelButton.setAttribute(\"id\", \"cancelButton\")","         ","         topright.appendChild(cancelButton);","        ","        var ajaxImg = document.createElement(\"div\");","    ","        alert(\"I am an alert box2323!\");","        Desktop.time = setTimeout(function() ","        {","        Desktop.loadIcon = document.createElement(\"img\");","        ","         Desktop.loadIcon.setAttribute(\"src\", \"images/ajax.gif\");","         ","          Desktop.loadIcon.setAttribute(\"id\", \"load\")","        Desktop.footer.appendChild(Desktop.loadIcon);","        },300);  ","        ","   ","        ","        ","        //\"Knuffar\" in taggarna i popup rutan.","        //cancelButton.setAttribute(\"click\");","        ","        ajaxImg.appendChild(galler);","        ","        mid.appendChild(ajaxImg);","","alert(\"ok\");","        //body.insertBefore(body.firstChild);","        ","        document.getElementById(\"body\").appendChild(popup);","        ","        //Funktion som stänger ner popup fönstret.","        cancelButton.onclick = function() { ","            popup.parentNode.removeChild(popup);","            Desktop.counter = 0;","        };","        ","        alert(\"slut3!\");","    },","    ","    //Knapp funktionen som kallar på ajax anropet för bilderna. ","    galleryButton: function() ","    {","            var that = this;","            var galleryIcon = document.getElementById(\"Menyikon\");","            ","            galleryIcon.addEventListener(\"click\", function() ","            {","                    if (that.counter === 1) {","                        return;","                    }","                    else{","                    that.init();","                    }","            },false);","    },","    ","    //Ajax metoden som hämtar ut länken med bilderna och knuffar in de i popup fönstret. ","    init: function() ","    {","        var galler = document.createElement(\"div\");","        ","        this.popupWindow(galler);","        var xhr = new XMLHttpRequest(); ","        var count = 0;","        ","        ","        xhr.onreadystatechange = function() ","        {","            if(xhr.readyState === 4) ","            {","                if(xhr.status >= 200 && xhr.status < 300 || xhr.status === 304) ","                {","                    var jsonStr = JSON.parse(xhr.responseText);","                    ","                    alert(xhr.responseText);","                    ","                    var temp; // varibelm kommer höd och bred ","                    ","                    var height = 0;","                    ","                    var width = 0;","                  ","                    //Letar upp bilden med den bredaste och högsta tumlängd.","                    for (var n = 0; n < jsonStr.length; n++) ","                    {","                        temp = jsonStr[n];","                        if (temp.thumbHeight > height) ","                        {","                            height = temp.thumbHeight;","                        }","                        if (temp.thumbWidth > width) ","                        {","                            width = temp.thumbWidth;","                        }","                    }","                    ","                    //Hämtar ut varje photo individuellt.","                    for (var i = 0; i < jsonStr.length; i++) ","                    {","                        var bild = document.createElement(\"img\");","                        ","                        var temp2 = document.createElement(\"div\");","                        ","                        temp2.setAttribute(\"class\", \"boxes\");","                        ","                       bild.setAttribute(\"src\", jsonStr[i].thumbURL);","                        ","                        bild.setAttribute(\"id\", \"photo\" + count);","                        ","                        galler.appendChild(temp2);","                        ","                        temp2.appendChild(bild);","                        ","                        count++;","                        ","                        //Ändrar bakgrundsbilden.","                       bild.onclick = function(e) ","                        {","                            var image = e.target.id.replace(\"photo\", \"\"); ","                            ","                            var Bakgrundsbild  = jsonStr[image].URL;","                            ","                            var body = document.getElementById(\"body\");","                            ","                            body.style.backgroundImage = \"url(\" + Bakgrundsbild  + \")\";","                            ","                        };      ","                        ","                    temp2.style.width = width + \"px\";","                    ","                    temp2.style.height = height + \"px\";","                    ","                    }","                }","                else {","                    console.log(\"Läsfel, status\"+xhr.status);","                }","                ","                clearTimeout(Desktop.time); // rensar ladare ","                ","                Desktop.footer.removeChild(Desktop.loadIcon);","            }","        };","        ","        xhr.open(\"get\", \"http://homepage.lnu.se/staff/tstjo/labbyServer/imgviewer/\", true);    ","        ","        xhr.send(null);","    }","    ","};","","window.onload = function(){","    Desktop.galleryButton();","    ","};"]}]}],[{"group":"doc","deltas":[{"start":{"row":430,"column":0},"end":{"row":433,"column":2},"action":"remove","lines":["window.onload = function(){","    Desktop.galleryButton();","    ","};"]},{"start":{"row":430,"column":0},"end":{"row":430,"column":29},"action":"insert","lines":["window.onload = Memory.start;"]}]}],[{"group":"doc","deltas":[{"start":{"row":430,"column":16},"end":{"row":430,"column":22},"action":"remove","lines":["Memory"]},{"start":{"row":430,"column":16},"end":{"row":430,"column":17},"action":"insert","lines":["S"]}]}],[{"group":"doc","deltas":[{"start":{"row":430,"column":16},"end":{"row":430,"column":17},"action":"remove","lines":["S"]}]}],[{"group":"doc","deltas":[{"start":{"row":430,"column":16},"end":{"row":430,"column":17},"action":"insert","lines":["D"]}]}],[{"group":"doc","deltas":[{"start":{"row":430,"column":17},"end":{"row":430,"column":18},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":430,"column":18},"end":{"row":430,"column":19},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":430,"column":19},"end":{"row":430,"column":20},"action":"insert","lines":["k"]}]}],[{"group":"doc","deltas":[{"start":{"row":430,"column":20},"end":{"row":430,"column":21},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":430,"column":21},"end":{"row":430,"column":22},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":430,"column":22},"end":{"row":430,"column":23},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":120,"column":0},"end":{"row":426,"column":5},"action":"remove","lines":["    //Ajax metoden som hämtar ut länken med bilderna och knuffar in de i popup fönstret. ","    init: function() ","    {","        var galler = document.createElement(\"div\");","        ","        this.popupWindow(galler);","        var xhr = new XMLHttpRequest(); ","        var count = 0;","        ","        ","        xhr.onreadystatechange = function() ","        {","            if(xhr.readyState === 4) ","            {","                if(xhr.status >= 200 && xhr.status < 300 || xhr.status === 304) ","                {","                    var jsonStr = JSON.parse(xhr.responseText);","                    ","                    alert(xhr.responseText);","                    ","                    var temp; // varibelm kommer höd och bred ","                    ","                    var height = 0;","                    ","                    var width = 0;","                  ","                    //Letar upp bilden med den bredaste och högsta tumlängd.","                    for (var n = 0; n < jsonStr.length; n++) ","                    {","                        temp = jsonStr[n];","                        if (temp.thumbHeight > height) ","                        {","                            height = temp.thumbHeight;","                        }","                        if (temp.thumbWidth > width) ","                        {","                            width = temp.thumbWidth;","                        }","                    }","                    ","                    //Hämtar ut varje photo individuellt.","                    for (var i = 0; i < jsonStr.length; i++) ","                    {","                        var bild = document.createElement(\"img\");","                        ","                        var temp2 = document.createElement(\"div\");","                        ","                        temp2.setAttribute(\"class\", \"boxes\");","                        ","                       bild.setAttribute(\"src\", jsonStr[i].thumbURL);","                        ","                        bild.setAttribute(\"id\", \"photo\" + count);","                        ","                        galler.appendChild(temp2);","                        ","                        temp2.appendChild(bild);","                        ","                        count++;","                        ","                        //Ändrar bakgrundsbilden.","                       bild.onclick = function(e) ","                        {","                            var image = e.target.id.replace(\"photo\", \"\"); ","                            ","                            var Bakgrundsbild  = jsonStr[image].URL;","                            ","                            var body = document.getElementById(\"body\");","                            ","                            body.style.backgroundImage = \"url(\" + Bakgrundsbild  + \")\";","                            ","                        };      ","                        ","                    temp2.style.width = width + \"px\";","                    ","                    temp2.style.height = height + \"px\";","                    ","                    }","                }","                else {","                    console.log(\"Läsfel, status\"+xhr.status);","                }","                ","                clearTimeout(Desktop.time); // rensar ladare ","                ","                Desktop.footer.removeChild(Desktop.loadIcon);","            }","        };","        ","        xhr.open(\"get\", \"http://homepage.lnu.se/staff/tstjo/labbyServer/imgviewer/\", true);    ","        ","        xhr.send(null);","    }","    ","};","","\"use strict\";","","var Desktop = {","    ","    counter : 0,","    ","    loadIcon : null,","    ","    footer : null,","    ","    time : null,","    ","    //Variablerna för popup fönstret.","    popupWindow: function(galler) ","    { ","        Desktop.counter++;","        ","        ","        var popup = document.createElement(\"div\");","        ","\t\tpopup.setAttribute(\"id\", \"popup\");","\t\t\t\t","\t\t","\t\tvar top = document.createElement(\"div\");","\t\ttop.setAttribute(\"id\", \"top\");","\t\t\t\t","\t\tvar mid = document.createElement(\"div\");","\t\tmid.setAttribute(\"id\", \"mid\");","\t\t\t\t"," Desktop.footer = document.createElement(\"div\");"," ","\t Desktop.footer.setAttribute(\"id\", \"footer\");"," "," alert(\"I am an alert box!\");","\t\t\t\t","\t\tpopup.appendChild(top);","\t\t","\t\tpopup.appendChild(mid);","\t\t","\t\tpopup.appendChild(Desktop.footer);// skapar tre ramar inuti popupfönstret ","\t\t\t\t","        var topright = document.createElement(\"div\");","\t\ttopright.setAttribute(\"id\", \"topright\");","\t\t\t\t","\t\tvar topleft = document.createElement(\"div\");","\t\ttopleft.setAttribute(\"id\", \"topleft\");","\t\t\t\t","\t\ttop.appendChild(topleft);","\t\ttop.appendChild(topright);// dellar upp topramen i höger och vänster","\t\t","        var imageIcon = document.createElement(\"img\");","        ","        imageIcon.setAttribute(\"src\", \"images/tinyCamera.png\");","        ","        imageIcon.setAttribute(\"id\", \"image\");","        ","        topleft.appendChild(imageIcon);","        ","        var cancelButton = document.createElement(\"img\");","        ","         cancelButton.setAttribute(\"src\", \"images/delete.png\");","         ","         cancelButton.setAttribute(\"id\", \"cancelButton\")","         ","         topright.appendChild(cancelButton);","        ","        var ajaxImg = document.createElement(\"div\");","    ","        alert(\"I am an alert box2323!\");","        Desktop.time = setTimeout(function() ","        {","        Desktop.loadIcon = document.createElement(\"img\");","        ","         Desktop.loadIcon.setAttribute(\"src\", \"images/ajax.gif\");","         ","          Desktop.loadIcon.setAttribute(\"id\", \"load\")","        Desktop.footer.appendChild(Desktop.loadIcon);","        },300);  ","        ","   ","        ","        ","        //\"Knuffar\" in taggarna i popup rutan.","        //cancelButton.setAttribute(\"click\");","        ","        ajaxImg.appendChild(galler);","        ","        mid.appendChild(ajaxImg);","","alert(\"ok\");","        //body.insertBefore(body.firstChild);","        ","        document.getElementById(\"body\").appendChild(popup);","        ","        //Funktion som stänger ner popup fönstret.","        cancelButton.onclick = function() { ","            popup.parentNode.removeChild(popup);","            Desktop.counter = 0;","        };","        ","        alert(\"slut3!\");","    },","    ","    //Knapp funktionen som kallar på ajax anropet för bilderna. ","    galleryButton: function() ","    {","            var that = this;","            var galleryIcon = document.getElementById(\"Menyikon\");","            ","            galleryIcon.addEventListener(\"click\", function() ","            {","                    if (that.counter === 1) {","                        return;","                    }","                    else{","                    that.init();","                    }","            },false);","    },","    ","    //Ajax metoden som hämtar ut länken med bilderna och knuffar in de i popup fönstret. ","    init: function() ","    {","        var galler = document.createElement(\"div\");","        ","        this.popupWindow(galler);","        var xhr = new XMLHttpRequest(); ","        var count = 0;","        ","        ","        xhr.onreadystatechange = function() ","        {","            if(xhr.readyState === 4) ","            {","                if(xhr.status >= 200 && xhr.status < 300 || xhr.status === 304) ","                {","                    var jsonStr = JSON.parse(xhr.responseText);","                    ","                    alert(xhr.responseText);","                    ","                    var temp; // varibelm kommer höd och bred ","                    ","                    var height = 0;","                    ","                    var width = 0;","                  ","                    //Letar upp bilden med den bredaste och högsta tumlängd.","                    for (var n = 0; n < jsonStr.length; n++) ","                    {","                        temp = jsonStr[n];","                        if (temp.thumbHeight > height) ","                        {","                            height = temp.thumbHeight;","                        }","                        if (temp.thumbWidth > width) ","                        {","                            width = temp.thumbWidth;","                        }","                    }","                    ","                    //Hämtar ut varje photo individuellt.","                    for (var i = 0; i < jsonStr.length; i++) ","                    {","                        var bild = document.createElement(\"img\");","                        ","                        var temp2 = document.createElement(\"div\");","                        ","                        temp2.setAttribute(\"class\", \"boxes\");","                        ","                       bild.setAttribute(\"src\", jsonStr[i].thumbURL);","                        ","                        bild.setAttribute(\"id\", \"photo\" + count);","                        ","                        galler.appendChild(temp2);","                        ","                        temp2.appendChild(bild);","                        ","                        count++;","                        ","                        //Ändrar bakgrundsbilden.","                       bild.onclick = function(e) ","                        {","                            var image = e.target.id.replace(\"photo\", \"\"); ","                            ","                            var Bakgrundsbild  = jsonStr[image].URL;","                            ","                            var body = document.getElementById(\"body\");","                            ","                            body.style.backgroundImage = \"url(\" + Bakgrundsbild  + \")\";","                            ","                        };      ","                        ","                    temp2.style.width = width + \"px\";","                    ","                    temp2.style.height = height + \"px\";","                    ","                    }","                }","                else {","                    console.log(\"Läsfel, status\"+xhr.status);","                }","                ","                clearTimeout(Desktop.time); // rensar ladare ","                ","                Desktop.footer.removeChild(Desktop.loadIcon);","            }","        };","        ","        xhr.open(\"get\", \"http://homepage.lnu.se/staff/tstjo/labbyServer/imgviewer/\", true);    ","        ","        xhr.send(null);","    }"]}]}],[{"group":"doc","deltas":[{"start":{"row":103,"column":3},"end":{"row":118,"column":6},"action":"remove","lines":[" //Knapp funktionen som kallar på ajax anropet för bilderna. ","    galleryButton: function() ","    {","            var that = this;","            var galleryIcon = document.getElementById(\"Menyikon\");","            ","            galleryIcon.addEventListener(\"click\", function() ","            {","                    if (that.counter === 1) {","                        return;","                    }","                    else{","                    that.init();","                    }","            },false);","    },"]}]}],[{"group":"doc","deltas":[{"start":{"row":103,"column":2},"end":{"row":103,"column":3},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":103,"column":1},"end":{"row":103,"column":2},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":103,"column":0},"end":{"row":103,"column":1},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":102,"column":4},"end":{"row":103,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":101,"column":5},"end":{"row":101,"column":6},"action":"remove","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":108,"column":24},"end":{"row":108,"column":29},"action":"remove","lines":["start"]},{"start":{"row":108,"column":24},"end":{"row":108,"column":36},"action":"insert","lines":[" popupWindow"]}]}],[{"group":"doc","deltas":[{"start":{"row":108,"column":24},"end":{"row":108,"column":25},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":69,"column":8},"end":{"row":70,"column":0},"action":"insert","lines":["",""]},{"start":{"row":70,"column":0},"end":{"row":70,"column":8},"action":"insert","lines":["        "]}]}],[{"group":"doc","deltas":[{"start":{"row":95,"column":0},"end":{"row":99,"column":10},"action":"remove","lines":["        //Funktion som stänger ner popup fönstret.","        cancelButton.onclick = function() { ","            popup.parentNode.removeChild(popup);","            Desktop.counter = 0;","        };"]}]}],[{"group":"doc","deltas":[{"start":{"row":94,"column":8},"end":{"row":95,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":70,"column":0},"end":{"row":79,"column":8},"action":"remove","lines":["        Desktop.time = setTimeout(function() ","        {","        Desktop.loadIcon = document.createElement(\"img\");","        ","         Desktop.loadIcon.setAttribute(\"src\", \"images/ajax.gif\");","         ","          Desktop.loadIcon.setAttribute(\"id\", \"load\")","        Desktop.footer.appendChild(Desktop.loadIcon);","        },300);  ","        "]}]}],[{"group":"doc","deltas":[{"start":{"row":69,"column":8},"end":{"row":70,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":69,"column":4},"end":{"row":69,"column":8},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":69,"column":0},"end":{"row":69,"column":4},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":68,"column":40},"end":{"row":69,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":70,"column":4},"end":{"row":70,"column":8},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":70,"column":0},"end":{"row":70,"column":4},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":69,"column":3},"end":{"row":70,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":26},"end":{"row":13,"column":32},"action":"remove","lines":["galler"]}]}],[{"group":"doc","deltas":[{"start":{"row":87,"column":4},"end":{"row":88,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":87,"column":0},"end":{"row":87,"column":4},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":86,"column":4},"end":{"row":87,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":85,"column":5},"end":{"row":86,"column":0},"action":"insert","lines":["",""]},{"start":{"row":86,"column":0},"end":{"row":86,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":86,"column":4},"end":{"row":87,"column":0},"action":"insert","lines":["",""]},{"start":{"row":87,"column":0},"end":{"row":87,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":87,"column":4},"end":{"row":182,"column":2},"action":"insert","lines":[" //Ajax metoden som hämtar ut länken med bilderna och knuffar in de i popup fönstret. ","    laddarner : function() ","    {","        var galler = document.createElement(\"div\");","        ","        Desktop.popupwindow(galler);","        ","        var xhr = new XMLHttpRequest(); ","        ","        var count = 0;","        ","        ","        xhr.onreadystatechange = function() ","        {","            if(xhr.readyState === 4) ","            {","                if(xhr.status === 200) ","                {","                    var info = JSON.parse(xhr.responseText);","                    ","                    alert(xhr.responseText);","                    ","                    var temp; // varibelm kommer höd och bred ","                    ","                    var height = 0;","                    ","                    var width = 0;","                  ","                    //Letar upp bilden med den bredaste och högsta tumlängd.","                    for (var n = 0; n < info.length; n++) ","                    {","                        temp = info[n];","                        if (temp.thumbHeight > height) ","                        {","                            height = temp.thumbHeight;","                        }","                        if (temp.thumbWidth > width) ","                        {","                            width = temp.thumbWidth;","                        }","                    }","                    ","                    //Hämtar ut varje photo individuellt.","                    for (var i = 0; i < info.length; i++) ","                    {","                        var bild = document.createElement(\"img\");","                        ","                        var temp2 = document.createElement(\"div\");","                        ","                        temp2.setAttribute(\"class\", \"boxes\");","                        ","                       bild.setAttribute(\"src\", info[i].thumbURL);","                        ","                        bild.setAttribute(\"id\", \"photo\" + count);","                        ","                        galler.appendChild(temp2);","                        ","                        temp2.appendChild(bild);","                        ","                        count++;","                        ","                        //Ändrar bakgrundsbilden.","                       bild.onclick = function(e) ","                        {","                            var image = e.target.id.replace(\"photo\", \"\"); ","                            ","                            var Bakgrundsbild  = info[image].URL;","                            ","                            var body = document.getElementById(\"body\");","                            ","                            body.style.backgroundImage = \"url(\" + Bakgrundsbild  + \")\";","                            ","                        };      ","                        ","                    temp2.style.width = width + \"px\";","                    ","                    temp2.style.height = height + \"px\";","                    ","                    }","                }","                else {","                    console.log(\"Läsfel, status\"+xhr.status);","                }","                ","                clearTimeout(Desktop.time); // rensar ladare ","                ","                Desktop.footer.removeChild(Desktop.loadIcon);","            }","        };","        ","        xhr.open(\"get\", \"http://homepage.lnu.se/staff/tstjo/labbyServer/imgviewer/\", true);    ","        ","        xhr.send(null);","    }","    ","};"]}]}],[{"group":"doc","deltas":[{"start":{"row":187,"column":24},"end":{"row":187,"column":35},"action":"remove","lines":["popupWindow"]},{"start":{"row":187,"column":24},"end":{"row":187,"column":33},"action":"insert","lines":["laddarner"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":4},"end":{"row":85,"column":5},"action":"remove","lines":["popupWindow: function() ","    { ","        Desktop.counter++;","        ","        ","        var popup = document.createElement(\"div\");","        ","\t\tpopup.setAttribute(\"id\", \"popup\");","\t\t\t\t","\t\t","\t\tvar top = document.createElement(\"div\");","\t\ttop.setAttribute(\"id\", \"top\");","\t\t\t\t","\t\tvar mid = document.createElement(\"div\");","\t\tmid.setAttribute(\"id\", \"mid\");","\t\t\t\t"," Desktop.footer = document.createElement(\"div\");"," ","\t Desktop.footer.setAttribute(\"id\", \"footer\");"," "," alert(\"I am an alert box!\");","\t\t\t\t","\t\tpopup.appendChild(top);","\t\t","\t\tpopup.appendChild(mid);","\t\t","\t\tpopup.appendChild(Desktop.footer);// skapar tre ramar inuti popupfönstret ","\t\t\t\t","        var topright = document.createElement(\"div\");","\t\ttopright.setAttribute(\"id\", \"topright\");","\t\t\t\t","\t\tvar topleft = document.createElement(\"div\");","\t\ttopleft.setAttribute(\"id\", \"topleft\");","\t\t\t\t","\t\ttop.appendChild(topleft);","\t\ttop.appendChild(topright);// dellar upp topramen i höger och vänster","\t\t","        var imageIcon = document.createElement(\"img\");","        ","        imageIcon.setAttribute(\"src\", \"images/tinyCamera.png\");","        ","        imageIcon.setAttribute(\"id\", \"image\");","        ","        topleft.appendChild(imageIcon);","        ","        var cancelButton = document.createElement(\"img\");","        ","         cancelButton.setAttribute(\"src\", \"images/delete.png\");","         ","         cancelButton.setAttribute(\"id\", \"cancelButton\")","         ","         topright.appendChild(cancelButton);","        ","        var ajaxImg = document.createElement(\"div\");","    ","        alert(\"I am an alert box2323!\");","   ","        ","        //\"Knuffar\" in taggarna i popup rutan.","        //cancelButton.setAttribute(\"click\");","        ","        ajaxImg.appendChild(galler);","        ","        mid.appendChild(ajaxImg);","","alert(\"ok\");","        //body.insertBefore(body.firstChild);","        ","        document.getElementById(\"body\").appendChild(popup);","        ","        ","        alert(\"slut3!\");","    }"]},{"start":{"row":13,"column":4},"end":{"row":107,"column":4},"action":"insert","lines":[" //Variablerna för popup fönstret.","    popupwindow: function(galler) ","    { ","        Desktop.counter++;","        ","        ","        var popup = document.createElement(\"div\");","        ","\t\tpopup.setAttribute(\"id\", \"popup\");","\t\t\t\t","\t\t","\t\tvar top = document.createElement(\"div\");","\t\ttop.setAttribute(\"id\", \"top\");","\t\t\t\t","\t\tvar mid = document.createElement(\"div\");","\t\tmid.setAttribute(\"id\", \"mid\");","\t\t\t\t"," Desktop.footer = document.createElement(\"div\");"," ","\t Desktop.footer.setAttribute(\"id\", \"footer\");"," "," alert(\"I am an alert box!\");","\t\t\t\t","\t\tpopup.appendChild(top);","\t\t","\t\tpopup.appendChild(mid);","\t\t","\t\tpopup.appendChild(Desktop.footer);// skapar tre ramar inuti popupfönstret ","\t\t\t\t","        var topright = document.createElement(\"div\");","\t\ttopright.setAttribute(\"id\", \"topright\");","\t\t\t\t","\t\tvar topleft = document.createElement(\"div\");","\t\ttopleft.setAttribute(\"id\", \"topleft\");","\t\t\t\t","\t\ttop.appendChild(topleft);","\t\ttop.appendChild(topright);// dellar upp topramen i höger och vänster","\t\t","        var Bildgallerikon = document.createElement(\"img\");","        ","        Bildgallerikon.setAttribute(\"src\", \"images/tinyCamera.png\");","        ","        Bildgallerikon.setAttribute(\"id\", \"image\");","        ","        topleft.appendChild(Bildgallerikon);","        ","        var avslutaikon = document.createElement(\"img\");","        ","         avslutaikon.setAttribute(\"src\", \"images/delete.png\");","         ","         avslutaikon.setAttribute(\"id\", \"cancelButton\")","         ","         topright.appendChild(avslutaikon);","        ","        var ajaxbild = document.createElement(\"div\");","    ","        alert(\"I am an alert box2323!\");","        ","        Desktop.time = setTimeout(function() ","        {","            ","        Desktop.loadIcon = document.createElement(\"img\");","        ","         Desktop.loadIcon.setAttribute(\"src\", \"images/ajax.gif\");","         ","          Desktop.loadIcon.setAttribute(\"id\", \"load\")","          ","        Desktop.footer.appendChild(Desktop.loadIcon);","        ","        },300);  ","        ","   ","        ","        ","        //\"Knuffar\" in taggarna i popup rutan.","        //cancelButton.setAttribute(\"click\");","        ","        ajaxbild.appendChild(galler);","        ","        mid.appendChild(ajaxbild);","","alert(\"ok\");","        //body.insertBefore(body.firstChild);","        ","        document.getElementById(\"body\").appendChild(popup);","        ","        //Funktion som stänger ner popup fönstret.","        avslutaikon.onclick = function() { ","            popup.parentNode.removeChild(popup);","            Desktop.counter = 0;","        };","        ","        alert(\"slut3!\");","    },","    "]}]}],[{"group":"doc","deltas":[{"start":{"row":12,"column":2},"end":{"row":12,"column":37},"action":"remove","lines":["  //Variablerna för popup fönstret."]}]}],[{"group":"doc","deltas":[{"start":{"row":12,"column":1},"end":{"row":12,"column":2},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":12,"column":0},"end":{"row":12,"column":1},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":11,"column":4},"end":{"row":12,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":99,"column":41},"end":{"row":100,"column":0},"action":"insert","lines":["",""]},{"start":{"row":100,"column":0},"end":{"row":100,"column":8},"action":"insert","lines":["        "]}]}],[{"group":"doc","deltas":[{"start":{"row":101,"column":48},"end":{"row":102,"column":0},"action":"insert","lines":["",""]},{"start":{"row":102,"column":0},"end":{"row":102,"column":12},"action":"insert","lines":["            "]}]}],[{"group":"doc","deltas":[{"start":{"row":205,"column":1},"end":{"row":205,"column":2},"action":"remove","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":205,"column":1},"end":{"row":205,"column":2},"action":"insert","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":205,"column":1},"end":{"row":205,"column":2},"action":"remove","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":205,"column":0},"end":{"row":205,"column":1},"action":"remove","lines":["}"]}]}],[{"group":"doc","deltas":[{"start":{"row":206,"column":1},"end":{"row":206,"column":2},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":206,"column":0},"end":{"row":206,"column":1},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":205,"column":0},"end":{"row":206,"column":2},"action":"remove","lines":["","  "]}]}],[{"group":"doc","deltas":[{"start":{"row":204,"column":4},"end":{"row":205,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":204,"column":0},"end":{"row":204,"column":4},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":203,"column":5},"end":{"row":204,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":132,"column":19},"end":{"row":196,"column":61},"action":"remove","lines":[" var temp; // varibelm kommer höd och bred ","                    ","                    var height = 0;","                    ","                    var width = 0;","                  ","                    //Letar upp bilden med den bredaste och högsta tumlängd.","                    for (var n = 0; n < info.length; n++) ","                    {","                        temp = info[n];","                        if (temp.thumbHeight > height) ","                        {","                            height = temp.thumbHeight;","                        }","                        if (temp.thumbWidth > width) ","                        {","                            width = temp.thumbWidth;","                        }","                    }","                    ","                    //Hämtar ut varje photo individuellt.","                    for (var i = 0; i < info.length; i++) ","                    {","                        var bild = document.createElement(\"img\");","                        ","                        var temp2 = document.createElement(\"div\");","                        ","                        temp2.setAttribute(\"class\", \"boxes\");","                        ","                       bild.setAttribute(\"src\", info[i].thumbURL);","                        ","                        bild.setAttribute(\"id\", \"photo\" + count);","                        ","                        galler.appendChild(temp2);","                        ","                        temp2.appendChild(bild);","                        ","                        count++;","                        ","                        //Ändrar bakgrundsbilden.","                       bild.onclick = function(e) ","                        {","                            var image = e.target.id.replace(\"photo\", \"\"); ","                            ","                            var Bakgrundsbild  = info[image].URL;","                            ","                            var body = document.getElementById(\"body\");","                            ","                            body.style.backgroundImage = \"url(\" + Bakgrundsbild  + \")\";","                            ","                        };      ","                        ","                    temp2.style.width = width + \"px\";","                    ","                    temp2.style.height = height + \"px\";","                    ","                    }","                }","                else {","                    console.log(\"Läsfel, status\"+xhr.status);","                }","                ","                clearTimeout(Desktop.time); // rensar ladare ","                ","                Desktop.footer.removeChild(Desktop.loadIcon);"]}]}],[{"group":"doc","deltas":[{"start":{"row":132,"column":18},"end":{"row":132,"column":19},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":132,"column":17},"end":{"row":132,"column":18},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":132,"column":16},"end":{"row":132,"column":17},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":132,"column":16},"end":{"row":132,"column":17},"action":"insert","lines":["}"]}]}]]},"ace":{"folds":[],"scrolltop":1695.7331237792969,"scrollleft":0,"selection":{"start":{"row":132,"column":17},"end":{"row":132,"column":17},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1421087930905,"hash":"3eb2264100f46dd044dbd1d1f30f820cee326ac3"}